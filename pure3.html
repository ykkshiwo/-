<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
<meta charset="utf-8">
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script src='fly-master/fly-master/dist/jquery.fly.min.js'></script>
<script>
		
		function sum(arr) { //数组相加
			var s = 0;
    		for (var i=arr.length-1; i>=0; i--) {
        		s += arr[i];
    		}
    		return s;
		}
		
		function sum_sum(arr){ //数组变为累加数组
			var s = [];
			for (var i=0; i<arr.length; i++){
				s.push(sum(arr.slice(0,i+1)))
			}
			return s;
		}
		
		$(document).ready(function(){
//			alert("test")
			var top_init = {}; //用来点击左边，定位右边的字典
			var top_init_sum = [] //上面字典的累加数组，用来滑动定位右边的类名
			var types = $(".type_name_con");
			console.log("有几个种类 +1：",types.length);
			var how_much_types = types.length;
			for(j = 0; j < how_much_types; j++) {
   				console.log(types[j].id) //分别获取每个红色大块的ID，建立每个框的高度字典。
				console.log($('#n'+j).height())
				top_init[types[j].id] = $('#n' + j).height()
			}
			console.log(top_init) //字典建立完毕
			var top_init_nosum = [];
			
			for(k in top_init){
				top_init_nosum.push(top_init[k])
			}
			
			console.log(top_init_nosum) //将top_init字典装换成数组
			top_init_sum = sum_sum(top_init_nosum) // top_init字典装换的数组，再装换为累加数组
			console.log(top_init_sum)
			
			$('#zuobian').scroll(function(){  //监听页面滚动，每次判断页面的scrollTop(),滑动后的高度
				var l = $(this).scrollTop() //每次导出页面的滑动距离
				console.log(l);
				var t = 0; //判断当前显示的是哪一类物品
				for (var z=0; z < top_init_sum.length; z++){
					console.log(z, top_init_sum[z])
					if(l < top_init_sum[z] - 40 ){
//						return z;
						console.log("现在是第 ",z+1," 类物品。")
						console.log("动态定位左边id为： ", z)
						console.log("动态定位右边id为： ", 'n'+z, 'm'+z)
						$('.type_names').css({'border-left': '0px', 'background-color': ''});
						$('#' + z).css({'border-left': '5px solid rgb(240,194,61)','background-color': 'rgb(255,255,255)'});
						$('.type_name').css({'position':'relative',"left":'0px',"width":''});
//						$('.type_name_con').css({"padding-top":"0px"})
						$('#m'+z).css({'position':'fixed',"left":"27%",'top':'0px',"width":'73%'});
//						$('#m'+z).parent().css({"padding-top":"40px"});
					    break;
					}
				}
										if(z==0){
			$('#m'+z).css({'position':'relative',"left":'0px',"width":''});
						};//第一类的商品比较特殊
			});
			
			$(".type_names").click(function(){
				var attr_name = $(this).attr('id');
				console.log(attr_name);
				var how_long_jump = 0;
				for(i = 0; i < attr_name; i++){
					console.log(top_init['n' + i])
					how_long_jump += top_init['n' + i]
				};
				console.log(how_long_jump)
				$('#zuobian').scrollTop(how_long_jump-40);
			});
			
			var three_is = 0;
			$("#touch").click(function(){
				if (three_is){
				$("#homePage").animate({right:"2px", bottom: "2px"}, 200, 'swing');
				$("#homePage").css("visibility","hidden")
				$("#shopCar").animate({right:"2px", bottom: "2px", top: ""}, 200, 'swing')
				$("#shopCar").css("visibility","hidden")
				$("#classify").animate({right:"2px", bottom: "2px"}, 200, 'swing')
				$("#classify").css("visibility","hidden")
				$("#center").animate({right:"2px", bottom: "2px", top: ""}, 200, 'swing')
				$("#center").css("visibility","hidden")
				three_is = 0;
					}
				else{
				$("#homePage").animate({right:"20px", bottom: "80px"}, 200, 'swing');
				$("#homePage").css("visibility","visible")
				$("#shopCar").animate({right:"76px", top: "38px"}, 200, 'swing')
				$("#shopCar").css("visibility","visible")
				$("#classify").animate({right:"76px", bottom: "38px"}, 200, 'swing')
				$("#classify").css("visibility","visible")
				$("#center").animate({right:"20px", top: "80px"}, 200, 'swing')
				$("#center").css("visibility","visible")
				three_is = 1;
				}
//				$(this).animate({left:"100px", top: "100px"}, 200, 'swing')
			});
			
			//飞入购物车
	var offset = $(".car").offset(); //购物车的位置
    $(".add").click(function(event){
        var addcar = $(this); 
//        var img = addcar.parent().find('img').attr('src');
        var flyer = $('	<div style="border-radius: 50%; width: 16px; height: 16px; background-color: #4F4C4C;z-index: 9999"></div>');
        flyer.fly({
            start: {
                left: event.pageX, //开始位置（必填）#fly元素会被设置成position: fixed 
                top: event.pageY //开始位置（必填） 
            }, 
            end: { 
                left: offset.left+20, //结束位置（必填)
                top: offset.top+20, //结束位置（必填） 
                width: 0, //结束时宽度 
                height: 0 //结束时高度 
            }, 
            onEnd: function(){ //结束回调
//                $("#msg").show().animate({width: '250px'}, 200).fadeOut(1000); 
//                addcar.css("cursor","default").removeClass('orange');
                  this.destory(); //移除dom
            } 
        });
    });
			var num = 0;
			$(".add").click(function(){
				console.log(num)
				num = num + 1;
				$("#carNum").text(num);
			});
			
		});
		
	</script>
<title>点菜</title>
<style>
html, body {
	height: 100%;
}
* {
	margin: 0;
	padding: 0;
}
.type_names {
	padding-top: 15px;
	padding-bottom: 15px;
	padding-left: 5px;
	font-size: 14px;
	border-bottom: 1px solid rgb(200,200,200);
	font-family: SimHei;
}
.type_name_con {
	border: 0px solid red;
	padding-top: 0px;
}
.type_name {
	border: 0px solid yellow;
	padding: 8px;
	margin-bottom: 6px;
	width: 100%;
	border-left: 5px solid rgb(240,194,61);
	background-color: rgb(200,200,200);
	box-sizing: border-box;
	font-size: 12px;
	position: relative;
	z-index: 200;
}
.type_content {
	border: 0px solid blue;
	padding-bottom: 10px;
	padding-left: 8px;
	padding-top: 2px;
	padding-right: 8px;
	position: relative;
	border-bottom: 0px solid red;
}
.type_content_in_1 {
	border: 0px solid red;
	position: relative;
	font-size: 14px;
	padding-bottom: 10px;
	border-bottom: 2px solid rgb(200,200,200);
}
.produce_name {
	font-size: 16px;
	font-weight: bold;
	margin-bottom: 6px;
	font-family: SimHei;
}
.produce_indu {
	font-size: 12px;
}
.product_picture {
	float: left;
	width: 60px;
	margin-top: 3px;
	margin-right: 3px;
}
.four {
	position: absolute;
	right: 2px;
	bottom: 2px;
	border: 0px solid red;
	visibility: hidden;
}
.car {
	border: 0px red solid;
	position: fixed;
	left: 2px;
	bottom: 2px;
	width: 60px;
	height: 60px;
	z-index: 8000;
}
.car_num {
	border: 0px solid blue;
	position: absolute;
	top: -5px;
	right: -5px;
	border-radius: 20px;
	background-color: red;
	line-height: 20px;
	color: white;
	font-weight: bold;
	padding: 0px 4px;
}
.price_add {
	clear: both;
	position: relative;
	border: 0px solid blue;
	margin-top: 20px;
}
.add {
	position: absolute;
	border: 0px red solid;
	width: 18px;
	right: 0px;
	bottom: 0px;
}
.money {
	color: rgb(239,195,62);
	font-size: 12px;
/*	font-weight: bold;*/
}
</style>
</head>

<body>
<div style="height: 100%; display: flex;justify-content: space-between;background-color: rgb(200,200,200)">
	<div style="border: 0px solid red; width: 26%; height: 100%;background-color: rgb(200,200,200)">
		<div class="type_names" id="0" style="border-left: 5px solid rgb(240,194,61);background-color: rgb(255,255,255)">佑远小吃<br/>
			Uyoung </div>
		<div class="type_names" id="1">能量碗<br/>
			Smooththie<br/>
			Bowl</div>
		<div class="type_names" id="2">果昔<br/>
			Smoothie</div>
		<div class="type_names" id="3">慢磨果汁<br/>
			Slow Juice</div>
		<div class="type_names" id="4">咖啡-<br/>
			Coffee</div>
		<div class="type_names" id="5">茶水-<br/>
			Tea</div>
		<div class="type_names" id="6">小杯子<br/>
			Shots</div>
	</div>
	<div style="width: 1%; background-color: rgb(255,255,255)"> </div>
	<div style="border: 0px solid blue; width: 73%; background-color: rgb(120,120,120); overflow-y: scroll; -webkit-overflow-scrolling: touch;position: relative; background-color: rgb(255,255,255)" id="zuobian">
		<div class="type_name_con" id="n0">
			<div class="type_name" id="m0"> Name1 </div>
			<div class="type_content">
				<div class="type_content_in_1"> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810051106072298175.jpg" class="product_picture"/>
					<p class="produce_name"> {{椰加雪菲}}</p>
					<p class="produce_indu"> {{这是斯大林同志最爱喝的咖啡之一，在苏联大清洗时期，斯大林喝着咖啡唱着歌。}}</p>
					<div class="price_add"> <a class="money">￥</a><a class="money" style="font-size: 18px;">{{120}}</a><a style="color: #515151">/份</a> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810291738127581065.png" class="add"/> </div>
				</div>
			</div>
			<div class="type_content"> content1-2 </div>
			<div class="type_content"> content1-3 </div>
			<div class="type_content"> content1-4 </div>
		</div>
		<div class="type_name_con" id="n1">
			<div class="type_name" id="m1"> Name2 </div>
			<div class="type_content">
								<div class="type_content_in_1"> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810051106072298175.jpg" class="product_picture"/>
					<p class="produce_name"> {{椰加雪菲}}</p>
					<p class="produce_indu"> {{这是斯大林同志最爱喝的咖啡之一，在苏联大清洗时期，斯大林喝着咖啡唱着歌。}}</p>
					<div class="price_add"> <a class="money">￥</a><a class="money" style="font-size: 18px;">{{120}}</a><a style="color: #515151">/份</a> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810291738127581065.png" class="add"/> </div>
				</div>
			</div>
			<div class="type_content"> content2-2 </div>
			<div class="type_content"> content2-3 </div>
			<div class="type_content">
				<div class="type_content_in_1"> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810051106072298175.jpg" class="product_picture"/>
					<p class="produce_name"> {{椰加雪菲}}</p>
					<p class="produce_indu"> {{这是斯大林同志最爱喝的咖啡之一，在苏联大清洗时期，斯大林喝着咖啡唱着歌。}}</p>
					<div class="price_add"> <a class="money">￥</a><a class="money" style="font-size: 18px;">{{120}}</a><a style="color: #515151">/份</a> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810291738127581065.png" class="add"/> </div>
				</div>
			</div>
			<div class="type_content"> content2-4 </div>
			<div class="type_content"> content2-4 </div>
			<div class="type_content"> content2-4 </div>
			<div class="type_content"> content2-4 </div>
		</div>
		<div class="type_name_con" id="n2">
			<div class="type_name" id="m2"> Name3 </div>
			<div class="type_content">
								<div class="type_content_in_1"> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810051106072298175.jpg" class="product_picture"/>
					<p class="produce_name"> {{椰加雪菲}}</p>
					<p class="produce_indu"> {{这是斯大林同志最爱喝的咖啡之一，在苏联大清洗时期，斯大林喝着咖啡唱着歌。}}</p>
					<div class="price_add"> <a class="money">￥</a><a class="money" style="font-size: 18px;">{{120}}</a><a style="color: #515151">/份</a> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810291738127581065.png" class="add"/> </div>
				</div>
			</div>
			<div class="type_content"> content3-2 </div>
			<div class="type_content"> content3-3 </div>
			<div class="type_content"> content3-4 </div>
		</div>
		<div class="type_name_con" id="n3">
			<div class="type_name" id="m3"> Name4 </div>
			<div class="type_content"> content4-1 </div>
			<div class="type_content"> content4-2 </div>
			<div class="type_content"> content4-3 </div>
			<div class="type_content"> content4-4 </div>
		</div>
		<div class="type_name_con" id="n4">
			<div class="type_name" id="m4"> Name5 </div>
			<div class="type_content"> content5-1 </div>
			<div class="type_content"> content5-2 </div>
			<div class="type_content"> content5-3 </div>
			<div class="type_content"> content5-4 </div>
		</div>
		<div class="type_name_con" id="n5">
			<div class="type_name" id="m5"> Name6 </div>
			<div class="type_content">
								<div class="type_content_in_1"> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810051106072298175.jpg" class="product_picture"/>
					<p class="produce_name"> {{椰加雪菲}}</p>
					<p class="produce_indu"> {{这是斯大林同志最爱喝的咖啡之一，在苏联大清洗时期，斯大林喝着咖啡唱着歌。}}</p>
					<div class="price_add"> <a class="money">￥</a><a class="money" style="font-size: 18px;">{{120}}</a><a style="color: #515151">/份</a> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810291738127581065.png" class="add"/> </div>
				</div>
			</div>
			<div class="type_content"> content6-2 </div>
			<div class="type_content"> content6-3 </div>
			<div class="type_content"> content6-4 </div>
			<div class="type_content"> content6-5 </div>
			<div class="type_content"> content6-6 </div>
			<div class="type_content"> content6-7 </div>
			<div class="type_content"> content6-8 </div>
			<div class="type_content"> content6-9 </div>
		</div>
		<div class="type_name_con" id="n6">
			<div class="type_name" id="m6"> Name7 </div>
			<div class="type_content">
								<div class="type_content_in_1"> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810051106072298175.jpg" class="product_picture"/>
					<p class="produce_name"> {{椰加雪菲}}</p>
					<p class="produce_indu"> {{这是斯大林同志最爱喝的咖啡之一，在苏联大清洗时期，斯大林喝着咖啡唱着歌。}}</p>
					<div class="price_add"> <a class="money">￥</a><a class="money" style="font-size: 18px;">{{120}}</a><a style="color: #515151">/份</a> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810291738127581065.png" class="add"/> </div>
				</div>
			</div>
			<div class="type_content"> content7-2 </div>
			<div class="type_content"> content7-3 </div>
			<div class="type_content"> content7-4 </div>
			<div class="type_content"> content7-1 </div>
			<div class="type_content"> content7-2 </div>
			<div class="type_content"> content7-3 </div>
			<div class="type_content"> content7-4 </div>
			<div class="type_content"> content7-1 </div>
			<div class="type_content"> content7-2 </div>
			<div class="type_content">
				<div class="type_content_in_1"> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810051106072298175.jpg" class="product_picture"/>
					<p class="produce_name"> {{椰加雪菲}}</p>
					<p class="produce_indu"> {{这是斯大林同志最爱喝的咖啡之一，在苏联大清洗时期，斯大林喝着咖啡唱着歌。}}</p>
					<div class="price_add"> <a class="money">￥</a><a class="money" style="font-size: 18px;">{{120}}</a><a style="color: #515151">/份</a> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810291738127581065.png" class="add"/> </div>
				</div>
			</div>
			<div class="type_content"> content7-4 </div>
		</div>
	</div>
</div>
<div style="position: fixed; right: 10px; bottom: 160px; border: 0px solid red; width: 36px; height: 36px; z-index: 9999"> <img id="touch" style="position: absolute; z-index: 999" src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810291738127581060.png" width="42px"> <a href="https://www.baidu.com"><img class="four" id="homePage" src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810291738127581067.png" width="56px"></a> <img class="four" id="shopCar" src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810291738127581067.png" width="56px"> <img class="four" id="classify" src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810291738127581061.png" width="56px"> <img class="four" id="center" src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810291738127581061.png" width="56px"> </div>
<div class="car"> <img src="http://yy.rxmmd.net/Storage/master/gallery/201810/201810291721097074560.png" width="60px"/>
	<div class="car_num">
		<p id="carNum">0</p>
	</div>
</div>
</body>
</html>
